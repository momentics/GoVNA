# GoVNA - Multi-Protocol NanoVNA Library for Go

GoVNA — это высокопроизводительная, потокобезопасная и расширяемая библиотека на Go для работы с различными семействами векторных анализаторов цепей NanoVNA.

Проект построен на основе драйверной архитектуры (паттерн "Мост"), что позволяет легко добавлять поддержку новых устройств, не изменяя основной API.

## Основные возможности

-   **Мультипротокольная поддержка**: Реализована поддержка как текстового протокола **NanoVNA V1**, так и бинарного протокола **NanoVNA V2/LiteVNA**.
-   **Автоматическое определение устройства**: Библиотека самостоятельно определяет тип подключенного устройства и выбирает нужный драйвер.
-   **Потокобезопасность**: Безопасное использование в многопоточных приложениях благодаря пулу устройств и мьютексам.
-   **Простота использования**: Единый API для работы с любым поддерживаемым устройством.
-   **Расширяемость**: Легкое добавление новых драйверов для поддержки будущих устройств.
-   **Производительность**: Оптимизировано для работы с большим количеством одновременных подключений. Для V2 используется эффективный режим чтения всех точек за один запрос.
-   **Мониторинг**: Встроенные метрики Prometheus для сервера.

## Поддерживаемые устройства

| Семейство/Устройство                                     | Статус поддержки           | Комментарий                                                         |
|----------------------------------------------------------|----------------------------|---------------------------------------------------------------------|
| **NanoVNA V1** (H, H4, качественные клоны)               | ✅ **Полная поддержка**    | Реализован текстовый протокол.                                      |
| **NanoVNA V2** (V2, Plus4, Plus4 Pro) / **LiteVNA** (64) | ✅ **Полная поддержка**    | Бинарный протокол реализован на основе `scikit-rf`.                 |
| **Неизвестные клоны**                                    | ✅ **Частичная поддержка** | Устройство будет работать, если его протокол совместим с V1 или V2. |

## Сравнительный анализ

| Аспект                              | GoVNA (Go)                                                                                        | PyVNA (Python)                                                                                      | pynanovna (Python)                                                                           |
|-------------------------------------|---------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------|
| **Архитектура драйверов**           | Четко разделена: `Driver` interface, `V1Driver`, `V2Driver`, фабрика драйверов, пул устройств.    | Аналогично GoVNA, с использованием ABC и динамической типизации Python.                             | Меньше модульности, драйверы не всегда четко отделены, часто монолитный код.                 |
| **Обработка протоколов**            | V1 — текстовый, V2 — бинарный с точным парсингом, оптимизировано для скорости.                    | Полный порт GoVNA с сохранением бинарного парсинга и текстового протокола.                          | В основном текстовый протокол, бинарный парсинг реализован частично, с меньшей оптимизацией. |
| **Обработка ошибок и безопасность** | Строгая валидация, маскировка ошибок, rate limiting, запуск от непривилегированного пользователя. | Аналогичные меры безопасности, адаптированные под Python.                                           | Без явной защиты от DoS, ошибок и валидации, ориентирован на локальное использование.        |
| **Параллелизм и масштабируемость**  | Использование горутин, пул устройств, высокая масштабируемость.                                   | Использование потоков и блокировок, ограниченный параллелизм из-за GIL, умеренная масштабируемость. | Ограниченная масштабируемость, не оптимизирован для многопоточной работы.                    |
| **Интеграция с экосистемой**        | Легко интегрируется в облачные сервисы, микросервисы, Prometheus.                                 | Отлично интегрируется с научным стеком Python (NumPy, SciPy, Pandas).                               | Широкая поддержка визуализации, калибровки, но менее ориентирована на серверные сценарии.    |
| **Документация и поддержка**        | Подробная, с комментариями и примерами.                                                           | Подробная, с комментариями и примерами, хорошо документирована.                                     | Хорошая документация, много примеров, но менее формализованная архитектура.                  |

## Установка
